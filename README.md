# Frontend blank template

## Описание

Данный шаблон предназначен для удобной и быстрой разработки клиентской части нового типового сайта.

Ваш проект разделен на две директории, `src` и `build`. Вы работаете с директорией исходников `src`, а сборщик компилирует ваш исходный код в сжатый и готовый проект в директории `build`, которую вы заливаете на сервер.

Вот какие технологии, модули и улучшения включены в данную сборку:

-   Данный шаблон полностью адаптивен и тестировался на разрешениях экрана от 320px до 2560px;
-   Компоненты шаблона полностью работоспособны для браузеров **_Chrome, Mozilla Firefox, Opera, Edge, IE11_**;
-   Локальный сервер для удобной разработки без необходимости удаленного сервера.
-   Подключен препроцессор [**Sass**](https://sass-lang.com/) с синтаксисом _SCSS_;
-   Использование JS-модулей, со всеми преимуществами `import` и `export`;
-   Ваш JS код автоматически трансформируется во время компиляции в _ES5_ синтаксис при помощи [**Babel**](https://babeljs.io/);
-   Добавлен полифилл для CSS-псевдокласса `:focus-visible`, при верстке пользуйтесь им вместо `:focus`;
    <!-- -   Технология _lazyload_ для динимической подгрузки изображений; -->
    <!-- -   Автоматический ресайз элементов `<textarea>`; -->
-   Cжатие изображений;
-   Сборка svg-спрайта;
-   Динамический размер шрифтов;
<!-- -   Модуль бургер-меню; -->
-   Модуль модальных окон;

## Установка

Для начала работы необходимо наличие у вас **NodeJS** и **npm**. Для проверки, установлены ли у вас данные утилиты, введите в терминал:

    node -v
    npm -v

Если терминал при вводе этих команд возвращает вам версии пакетов:

    node -v
    v14.15.1

    npm -v
    6.14.8

значит обе утилиты установлены на ваш компьютер.

В противном случае вам необходимо установить данные утилиты себе на компьютер
[**NodeJS**](https://nodejs.org/en/)

Скачиваете файлы сборки в нужную вам директорию, после чего в терминале вводите:

    npm install

После скачивания всех необходимых пакетов, сборка готова к работе.

---

## Структура проекта

    blank
    ├── build
    ├── src
    │    ├── blocks
    │    ├── fonts
    │    ├── img
    │    ├── js
    │    ├── libs
    │    ├── pages
    │    ├── resources
    │    └── scss
    │
    ├── .browserslistrc
    ├── .eslintrc.json
    ├── .gitignore
    ├── .stylelintrc
    ├── gulpfile.js
    ├── package.json
    ├── README.md
    └── webpack.config.js

`./build` - сюда будут попадать файлы с готовым проектом, самостоятельно в этой директории мы не работаем.

`./src` - основная рабочая директория. Все файлы исходников помещаем в её поддиректории.

#### БЭМ-блоки

`./src/blocks/` - здесь хранятся БЭМ-блоки. Сборка создана для удобного взаимодействия с ними. Каждый блок вашего сайта, будь это кнопка, или целая секция сайта, имеют свою директорию с названием данного блока, внутри которго находятся все файлы этого блока (_.html, .scss, .js_).

`./src/blocks/common/` - общие блоки для всех страниц сайта. Например сюда стоит поместить блоки 'header', 'footer', 'menu' и т.п.

`./src/blocks/pages/*название страницы*/` - блоки для конкретной страницы сайта.

`./src/blocks/blocks.js` - основной файл для импорта из _.js_-файлов БЭМ-блоков. При создании нового БЭМ-блока, не забудьте импортировать его сюда.

#### Шрифты

`./src/fonts/`- директория для шрифтов. Если ваши шрифты находятся в формате _.ttf_, запустите `npm run fonts`, и в нее добавятся _.woff_ и _.woff2_ версии шрифтов.

#### Изображения

`./src/img/` - файлы изображений. В корень папки помещайте графику необходимую для верски сайта.

`./src/img/favicon` - поместите сюда изображение (_.png .jpg_), из которго создадутся все необходимые размеры favicon. Не помещайте сюда больше одного изображения.

`./src/img/sprite/` - _.svg_-файлы, которые будут собраны в svg-спрайт.

`./src/img/upload/` - отличное место для фотографий товара, аватарок пользователей и т.п.

#### JavaScript

`./src/js/import/blocks.js` - если в ващем БЭМ-блоке из директории `./src/blocks/**` имеется _.js_ файл, импортируйте его в данный файл.

`./src/js/import/libs.js` - для импорта файлов библиотек из директории `./libs/`.

`./src/js/import/polifills.js` - для добавления [js-полифиллов](https://developer.mozilla.org/ru/docs/Glossary/Polifill).

`./src/js/main.js` - основной _.js_-файл. Старайтесь не работать в нем. В идеале он должен осаться нетронутым. Пишите код в _.js_-файлах БЭМ-блоков и просто импортируйте их в `./src/blocks/blocks.js`.

#### Сторонние библиотеки

`./src/libs/` - для хранения библиотек которые нельзя подключить через npm, а также собственных наработок.

#### Страницы сайта

`./src/pages/` - здесь хранятся все шаблоны страниц сайта. Старайтесь не писать в данных файлах просто _html_, а подключайте файл БЭМ-блока в него при помощи `@include('./путь/к/бэм-блоку')`;

#### Дополнительные ресурсы

`./src/resources/` - для хранения всех дополнительных файлов, например какого-нибудь php, или видео-файлов. Все файлы из этой папки будут помещены в корень `./build/`.

#### Файлы стилей

`./src/scss/`- директория для файлов стилей.

`./src/scss/base/_fonts.scss` - файл для подключения шрифтов в проекте.

`./src/scss/base/_general.scss` - файл с базовыми стилями проекта. Кастомизируйте все, что нельзя изменить при помощи переменных `./src/scss/helpers/_variables.scss`.

`./src/scss/helpers/_functions.scss` - для [SCSS-функций](https://sass-scss.ru/documentation/funktsii/).

`./src/scss/helpers/_mixins.scss` - для [SCSS-миксинов](https://sass-scss.ru/documentation/miksini/).

`./src/scss/helpers/_variables.scss` - для [SCSS-переменных](https://sass-scss.ru/documentation/sassscript/peremennie/). Первым делом кастомизируйте ваш проект при помощи задания значений переменных в данном файле, вместо того чтобы переопределять их.

`./src/scss/_import.scss` - служебный файл для импортирования в него остальных файлов. Не импортируйте ваши БЭМ-блоки напрямую сюда, для этого в каждой директории, где можно использовать scss, лежит файл для импорта scss с названием текущей директории. Например для импорта БЭМ-блока из `./src/blocks/pages/index/features/features.scss` импортируйте его в самый ближний `./src/blocks/pages/index/_index.scss`;

### Служебные файлы

`./.browserslistrc` - файл со списком поддерживаемых браузеров. Влияет на расстановку CSS-префиксов и степень конвертации JS. Можно подкорректировать при условия знакомства с [синтаксисом](https://github.com/browserslist/browserslist).

`./.editorconfig` - файл с настройками редактора. В нем указаны настройки отступов вашего редактора в проекта, настройки кодировки и т.п. Если вы используете свой файл настроек в пользовательской директории, данный файл можно удалить, или отредактировать под себя. [Подробная информация](http://editorconfig.org).

`./.eslintrc.json` - файл с настройками линтинга для _.js_-файлов. Можно удалить, или отредактировать под себя. [Подробная информация](https://eslint.org/).

`./.gitignore` - файл для описания игнорируемых файлов git'ом. Можно удалить, или отредактировать под себя. [Подробная информация](http://git-scm.com/docs/gitignore).

`./.stylelintrc` - файл настроек линтинга _.scss_-файлов. Можно удалить, или отредактировать под себя. [Подробная информация](https://stylelint.io/).

`./gulpfile.js` - главный файл сборки. В нем прописаны все скрипты для сборки проекта. Изменять на свой страх и риск предварительно ознакомившись с [руководством](https://gulpjs.com/docs/en/api/concepts).

`./package.json` - файл в котором указаны все зависимости проекта. Руками в нем ничего, кроме значений ключа _"scripts"_ мы не трогаем.

`./webpack.config.js` - файл конфигурации webpack. Если необходимо в нём что-то изменить, ознакомьтесь с [руководством](https://webpack.js.org/concepts/).

---

## Начало работы

Все управление ведется из терминала. Для ввода команд перейдите в терминале в директорию с проектом и вводите нужную команду:

**`npm start`** или **`gulp`** - запуск локального сервера для разработки без сжатия файлов.

**`npm run dev:prod`** или **`gulp dev --prod`** - запуск локального сервера со сжатием файлов.

**`npm run build`** или **`gulp build`** - сборка проекта без сжатия файлов.

**`npm run build:prod`** или **`gulp build --prod`** - сборка проекта со сжатием файлов.

**`npm run fonts`** или **`gulp fonts`** - конвертация шрифтов из ttf в woff/woff2.

**Важно!** Если у вас имеются файлы шрифтов в формате `.ttf`, перед первым запуском `npm start`, поместите их в директорию `src/fonts` проекта и запустите команду `npm run fonts`. Данную операцию необходимо проделать после добавления всех файлов шрифтов. Если в дальнейшем вы добавите в проект другие шрифты, просто запустите команду еще раз.

---

## Работа с проектом

### JS-файлы

В сборке реализован функционал js-модулей, и вы спокойно можете использовать его в своем проекте, и не писать весь js-код в одном файле.

Импорт всего js-файла:

**foo.js**

```js
function foo() {
    console.log("Hello World!");
}
```

**index.js**

```js
import "./foo";
foo();

/*Hello World!*/
```

#### Import

Импортируйте _.js_-файлы БЭМ-блоков в файл `./src/blocks/blocks.js`. Файл `blocks.js` в дальнейшем автоматически импортируется в основной js-файл.

Старайтесь подключать сторонние библиотеки/плагины через `npm` и импортировать их в БЭМ-блок в котором они используются. Если библиотека/плагин - необходимы во всем проекте импортируйте его в `./src/js/import/libs.js`. Все локальные библиотеки/плагины помещенные в `.src/libs/` ,также подключайте в файле `./src/js/import/libs.js`

**ВАЖНО!** Webpack инкапсулирует все модули для того, чтобы разные модули не конфликтовали друг с другом. Если после сборки фронтенда, вам будет необходим доступ к какому-либо плагину добавленному в проект, необходимо напрямую сохранть его в объекте `window`.

```js
import Swiper from "Swiper"; // Подключаем плагин в файл
window.Swiper = Swiper; // Сохраняем Swiper в глобальной области видимости, и имеем к нему доступ после сборки.
```

Старайтесь делать это как можно реже. Засорение глобальной области видимости чревато конфликтами. Однако я пока не нашел другого решения. Если у вас есть другое решение, буду рад вашим советам [email](mailto:flucky@mail.ru)/[telegram](https://tlgg.ru/FluckyMENDES).

## Модули

### Меню

Для создания простого меню, которое при мобильной версии превратиться в скрытое, и будет выезжать при нажатии на кнопку "Бургер" необходимо:

1. Разместить данный шаблон в необходимом блоке, например в хедере:

```html
<nav class="menu">
    <button
        class="menu__burger burger btn"
        aria-label="Открыть/закрыть главное меню"
    >
        <span class="burger__icon"></span>
    </button>
    <ul class="menu__list">
        <li class="menu__item">
            <a class="menu__link" href="#">Link 1</a>
        </li>
        <li class="menu__item">
            <a class="menu__link" href="#">Link 2</a>
        </li>
        <li class="menu__item">
            <a class="menu__link" href="#">Link 3</a>
        </li>
    </ul>
</nav>
```

---

### Модальные окна

Для создания нового модального окна необходимо:

1. В любом месте html-файла, но предпочтительнее где-нибудь в футере перед подключением скиптов, разместить шаблон модального окна:

```html
<div class="modal" id="modal-example">
    <div class="modal__dialog">
        <div class="modal__header">
            <div class="modal__header-content">
                <h4 class="modal__title">Заголовок</h4>
            </div>
            <button
                class="modal__btn-close js-modal-close"
                aria-label="Закрыть модальное окно"
            >
                <span class="modal__icon--close"></span>
            </button>
        </div>
        <div class="modal__body">Контент</div>
        <div class="modal__footer"></div>
    </div>
</div>
```

**ВАЖНО!** Обязательно укажите `id` для родительского блока с классом "modal"

2. Для открытия модального окна создаем любой элемент (напр. `<a>` или `<button>`) с классом `"js-modal-open"` и дата-атрибутом `"data-modal"`, в котором указать `id` блока модального окна.

```html
<a class="js-modal-open" data-modal="modal-example">Открыть модальное окно</a>
```

Имеются 4 размера ширины модальных окон:

| Класс          | Max-width |
| -------------- | --------- |
| **modal--s**   | 400px     |
| **modal--m**   | 600px     |
| **modal--l**   | 900px     |
| **без класса** | 80vw      |

Для задания нужного размера, просто добавьте подходящий класс для родительского контейнера `"modal"`:

```html
<div class="modal modal--m" id="modal-example">...</div>
```

Если не задать никакого дополнительного класса то ширина модального окна будет равна `max-width: 80vw`.
